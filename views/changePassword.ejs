<%- include("partials/header") %>
    <% if(user.role==="admin" ) {%>
        <%- include("partials/adminSideBar") %>
    <% } else if(user.role==="patient" ) { %>
        <%- include("partials/patientSideBar") %>
        <% if(message.error){ %>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <strong class="text-center"><%= message.error%></strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        <% if(message.success){ %>
            <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
                <strong class="text-center"><%= message.success%></strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        <div class="container" style="margin-top:21vh;">
        <div class="row justify-content-center">
            <div class="col-11 col-md-4 card shadow-lg m-1 p-3">
            <h3 class="text-center"><%=i18n.ChangePassword%></h3>
            <div class="row justify-content-center">
                <div class="separator col-12"></div>
            </div>
            <div class="row justify-content-center">
                <div class="col-12">
                    <form  action="/changepassword" method="post" onsubmit="return checkPassword(this)">
                        <div>
                            <input type="password" placeholder="<%=i18n.EnterOldPassword%>" id="login-input" name="oldPassword" required>
                        </div>
                        <div>
                            <input type="password" name="newPassword" placeholder="<%=i18n.EnterNewPassword%>" id="login-input1" required>
                            <span toggle="login-input1" class="fa fa-fw fa-eye field-icon toggle-password" onclick="show(this)"></span>
                        </div>
                        <div>
                            <input type="password" name="confirmpassword" placeholder="<%=i18n.ConfirmNewPassword%>" id="login-input" required>
                            
                        </div>
                        <div class="text-center p-3">
                            <input type="submit" class="btn btn-primary btn-lg rounded-pill" value="<%=i18n.Confirm%>" id="formsubmit"/>
                        </div>
                    </form>
                </div>
            </div> 
        </div>
    </div>
    <% } else { %>
        <%- include("partials/doctorSideBar") %>
    <% } %>

    <!--If the user is not patient then below codes -->

    <% if(user.role != "patient") {%>
        <% if(message.error){ %>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <strong class="text-center"><%= message.error%></strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        <% if(message.success){ %>
            <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
                <strong class="text-center"><%= message.success%></strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        <div class="container" style="margin-top:21vh;">
        <div class="row justify-content-center">
            <div class="col-11 col-md-4 card shadow-lg m-1 p-3">
            <h3 class="text-center">Change Password</h3>
            <div class="row justify-content-center">
                <div class="separator col-12"></div>
            </div>
            <div class="row justify-content-center">
                <div class="col-12">
                    <form  action="/changepassword" method="post" onsubmit="return checkPassword(this)">
                        <div>
                            <input type="password" placeholder="Enter Old Password" id="login-input" name="oldPassword" required>
                        </div>
                        <div>
                            <input type="password" name="newPassword" placeholder="Enter New Password" id="login-input1" required>
                            <span toggle="login-input1" class="fa fa-fw fa-eye field-icon toggle-password" onclick="show(this)"></span>
                        </div>
                        <div>
                            <input type="password" name="confirmpassword" placeholder="Confirm New Password" id="login-input" required>
                            
                        </div>
                        <div class="text-center p-3">
                            <input type="submit" class="btn btn-primary btn-lg rounded-pill" value="Confirm" id="formsubmit"/>
                        </div>
                    </form>
                </div>
            </div> 
        </div>
        
    </div>
    <%}%>
<script>
    function checkPassword(form) {
        password1 = form.newpassword.value;
        password2 = form.confirmpassword.value;
        if (password1 != password2) {
            alert ("\nPassword did not match: Please try again...")
            return false;
        }
        else{
            alert("Password Match")
            return true;
        }
    }
    function show(e) {
        e.classList.toggle("fa-eye-slash");
        let input=e.getAttribute("toggle");
        if (document.getElementById(input).type == "password") {
            document.getElementById(input).type="text";
        } else {
            document.getElementById(input).type="password";
        }
    }
</script>
<%- include("partials/footer") %>
                

    
